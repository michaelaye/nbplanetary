---

title: Utils


keywords: fastai
sidebar: home_sidebar

summary: "General utilities. Should probably split up into `utils.time` and `utils.download`"
description: "General utilities. Should probably split up into `utils.time` and `utils.download`"
nb_path: "notebooks/01_utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/01_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Time-format-strings">Time format strings<a class="anchor-link" href="#Time-format-strings"> </a></h2><p>First, we define the different format strings these utils convert from and to.</p>
<p>An identifier with <code>xxx_dt_format_xxx</code> in its name signifies a full <code>datetime</code> format as compared to dates only.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="NASA-date-to-datetime-and-ISO">NASA date to datetime and ISO<a class="anchor-link" href="#NASA-date-to-datetime-and-ISO"> </a></h3><p>What we call NASA data, is the often used <code>YYYY-JJJ</code> based format in the Planetary Data System identifying dates via the running number of the day in the year, e.g. "2010-240".</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="nasa_time_to_datetime" class="doc_header"><code>nasa_time_to_datetime</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L66" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>nasa_time_to_datetime</code>(<strong><code>inputstr</code></strong>)</p>
</blockquote>

<pre><code>User function to convert all kinds of NASA PDS datestrings with day_of_year into datetimes.</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>inputstr</code></strong></td>
<td></td>
<td></td>
<td>inputstr of format YYYY-jjj, YYYY-jjjTHH:MM:SS or YYYY-jjjTHH:MM:SS.ffffff</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><code>datetime</code></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Example dates and times to test:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">nasa_date</span> <span class="o">=</span> <span class="s2">&quot;2010-110&quot;</span>
<span class="n">iso_date</span> <span class="o">=</span> <span class="s2">&quot;2010-4-20&quot;</span>
<span class="n">nasa_datetime</span> <span class="o">=</span> <span class="s2">&quot;2010-110T10:12:14&quot;</span>
<span class="n">nasa_datetime_with_ms</span> <span class="o">=</span> <span class="n">nasa_datetime</span> <span class="o">+</span> <span class="s2">&quot;.123000&quot;</span>
<span class="n">iso_datetime</span> <span class="o">=</span> <span class="s2">&quot;2010-04-20T10:12:14&quot;</span>
<span class="n">iso_datetime_with_ms</span> <span class="o">=</span> <span class="n">iso_datetime</span> <span class="o">+</span> <span class="s2">&quot;.123000&quot;</span>
<span class="n">nasa_times</span> <span class="o">=</span> <span class="p">[</span><span class="n">nasa_date</span><span class="p">,</span> <span class="n">nasa_datetime</span><span class="p">,</span> <span class="n">nasa_datetime_with_ms</span><span class="p">]</span>
<span class="n">iso_times</span> <span class="o">=</span> <span class="p">[</span><span class="n">iso_date</span><span class="p">,</span> <span class="n">iso_datetime</span><span class="p">,</span> <span class="n">iso_datetime_with_ms</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">nasa_time_to_datetime</span><span class="p">(</span><span class="n">nasa_date</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">nasa_time_to_datetime</span><span class="p">(</span><span class="n">nasa_datetime</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">nasa_time_to_datetime</span><span class="p">(</span><span class="n">nasa_datetime_with_ms</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span>
    <span class="mi">2010</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">123000</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="nasa_time_to_iso" class="doc_header"><code>nasa_time_to_iso</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L79" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>nasa_time_to_iso</code>(<strong><code>inputstr</code></strong>:<code>str</code>, <strong><code>with_hours</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>

<pre><code>Convert the day-number based NASA datetime format to ISO</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>inputstr</code></strong></td>
<td><code>str</code></td>
<td></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong><code>with_hours</code></strong></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>Switch if return is wanted with hours (i.e. isoformat)</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><code>str</code></td>
<td></td>
<td>Datestring in ISO-format.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Conversions to ISO format, but not providing hours if they are not in input:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">nasa_times</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Input:&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">nasa_time_to_iso</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Input: 2010-110
2010-04-20
Input: 2010-110T10:12:14
2010-04-20T10:12:14
Input: 2010-110T10:12:14.123000
2010-04-20T10:12:14.123000
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If hours are wanted in the isostring, use <code>with_hours=True</code>:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">nasa_times</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Input:&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">nasa_time_to_iso</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">with_hours</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Input: 2010-110
2010-04-20T00:00:00
Input: 2010-110T10:12:14
2010-04-20T10:12:14
Input: 2010-110T10:12:14.123000
2010-04-20T10:12:14.123000
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">nasa_time_to_iso</span><span class="p">(</span><span class="n">nasa_date</span><span class="p">,</span> <span class="n">with_hours</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;2010-04-20T00:00:00&quot;</span>
<span class="k">assert</span> <span class="n">nasa_time_to_iso</span><span class="p">(</span><span class="n">nasa_date</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;2010-04-20&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="ISO-date-to-%22NASA-format%22">ISO date to "NASA-format"<a class="anchor-link" href="#ISO-date-to-%22NASA-format%22"> </a></h3><p>Again, with NASA-format, we mean the ofen used (in PDS and mission files) YYYY-JJJ format, e.g. "2010-240".</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="iso_to_nasa_time" class="doc_header"><code>iso_to_nasa_time</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L97" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>iso_to_nasa_time</code>(<strong><code>inputstr</code></strong>:<code>str</code>)</p>
</blockquote>

<pre><code>Convert iso date to day-number based NASA date.</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>inputstr</code></strong></td>
<td><code>str</code></td>
<td></td>
<td>Date string of the form Y-m-d</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><code>str</code></td>
<td></td>
<td>Datestring in NASA standard yyyy-jjj</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="iso_to_nasa_datetime" class="doc_header"><code>iso_to_nasa_datetime</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L115" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>iso_to_nasa_datetime</code>(<strong><code>dtimestr</code></strong>:<code>str</code>)</p>
</blockquote>

<pre><code>Convert iso datetime to day-number based NASA datetime.</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>dtimestr</code></strong></td>
<td><code>str</code></td>
<td></td>
<td>Datetime string of the form yyyy-mm-ddTHH-MM-SS</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">iso_times</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Input:&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">iso_to_nasa_time</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Input: 2010-4-20
2010-110
Input: 2010-04-20T10:12:14
2010-110T10:12:14
Input: 2010-04-20T10:12:14.123000
2010-110T10:12:14.123000
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">iso_to_nasa_time</span><span class="p">(</span><span class="n">iso_date</span><span class="p">)</span> <span class="o">==</span> <span class="n">nasa_date</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">nasa_time_to_iso</span><span class="p">(</span><span class="n">nasa_datetime</span><span class="p">)</span> <span class="o">==</span> <span class="n">iso_datetime</span>
<span class="k">assert</span> <span class="n">nasa_time_to_iso</span><span class="p">(</span><span class="n">nasa_datetime_with_ms</span><span class="p">)</span> <span class="o">==</span> <span class="n">iso_datetime_with_ms</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">iso_to_nasa_time</span><span class="p">(</span><span class="n">iso_datetime</span><span class="p">)</span> <span class="o">==</span> <span class="n">nasa_datetime</span>
<span class="k">assert</span> <span class="n">iso_to_nasa_time</span><span class="p">(</span><span class="n">iso_datetime_with_ms</span><span class="p">)</span> <span class="o">==</span> <span class="n">nasa_datetime_with_ms</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="replace_all_nasa_times" class="doc_header"><code>replace_all_nasa_times</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L131" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>replace_all_nasa_times</code>(<strong><code>df</code></strong>:<code>DataFrame</code>)</p>
</blockquote>

<pre><code>Find all NASA times in dataframe and replace with ISO.

Changes will be implemented on incoming dataframe!

This will be done for all columns with the word TIME in the column name.</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>df</code></strong></td>
<td><code>DataFrame</code></td>
<td></td>
<td>DataFrame with NASA time columns</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Network-utils">Network utils<a class="anchor-link" href="#Network-utils"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="parse_http_date" class="doc_header"><code>parse_http_date</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L145" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>parse_http_date</code>(<strong><code>text</code></strong>:<code>str</code>)</p>
</blockquote>

<pre><code>Parse date string retrieved via urllib.request.</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>text</code></strong></td>
<td><code>str</code></td>
<td></td>
<td>datestring from urllib.request</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><code>datetime</code></td>
<td></td>
<td>dt.datetime object from given datetime string</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_remote_timestamp" class="doc_header"><code>get_remote_timestamp</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L152" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_remote_timestamp</code>(<strong><code>url</code></strong>:<code>str</code>)</p>
</blockquote>

<pre><code>Get the timestamp of a remote file.

Useful for checking if there's an updated file available.</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>url</code></strong></td>
<td><code>str</code></td>
<td></td>
<td>URL to check timestamp for</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><code>datetime</code></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="check_url_exists" class="doc_header"><code>check_url_exists</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L164" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>check_url_exists</code>(<strong><code>url</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="url_retrieve" class="doc_header"><code>url_retrieve</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L172" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>url_retrieve</code>(<strong><code>url</code></strong>:<code>str</code>, <strong><code>outfile</code></strong>:<code>str</code>, <strong><code>chunk_size</code></strong>:<code>int</code>=<em><code>128</code></em>)</p>
</blockquote>

<pre><code>Improved urlretrieve with progressbar, timeout and chunker.

This downloader has built-in progress bar using tqdm and using the `requests`
package it improves standard `urllib` behavior by adding time-out capability.

I tested different chunk_sizes and most of the time 128 was actually fastest, YMMV.

Inspired by https://stackoverflow.com/a/61575758/680232</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>url</code></strong></td>
<td><code>str</code></td>
<td></td>
<td>The URL to download</td>
</tr>
<tr>
<td><strong><code>outfile</code></strong></td>
<td><code>str</code></td>
<td></td>
<td>The path where to store the downloaded file.</td>
</tr>
<tr>
<td><strong><code>chunk_size</code></strong></td>
<td><code>int</code></td>
<td><code>128</code></td>
<td>The size of the chunk for the request.iter_content call. Default: 128</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="have_internet" class="doc_header"><code>have_internet</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L201" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>have_internet</code>()</p>
</blockquote>

<pre><code>Fastest way to check for active internet connection.

From https://stackoverflow.com/a/29854274/680232</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Image-processing-helpers">Image processing helpers<a class="anchor-link" href="#Image-processing-helpers"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="height_from_shadow" class="doc_header"><code>height_from_shadow</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L216" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>height_from_shadow</code>(<strong><code>shadow_in_pixels</code></strong>:<code>float</code>, <strong><code>sun_elev</code></strong>:<code>float</code>)</p>
</blockquote>

<pre><code>Calculate height of an object from its shadow length.

Note, that your image might have been binned.
You need to correct `shadow_in_pixels` for that.</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>shadow_in_pixels</code></strong></td>
<td><code>float</code></td>
<td></td>
<td>Measured length of shadow in pixels</td>
</tr>
<tr>
<td><strong><code>sun_elev</code></strong></td>
<td><code>float</code></td>
<td></td>
<td>Ange of sun over horizon in degrees</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><code>float</code></td>
<td></td>
<td>Height [meter]</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_gdal_center_coords" class="doc_header"><code>get_gdal_center_coords</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L228" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_gdal_center_coords</code>(<strong><code>imgpath</code></strong>:<code>Union</code>[<code>str</code>, <code>Path</code>])</p>
</blockquote>

<pre><code>Get center rows/cols pixel coordinate for GDAL-readable dataset.

Check CLI `gdalinfo --formats` to see all formats that GDAL can open.</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>imgpath</code></strong></td>
<td><code>Path]</code></td>
<td></td>
<td>Path to raster image that is readable by GDLA</td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><code>Tuple[int, int]</code></td>
<td></td>
<td>center row/col coordinates.</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="file_variations" class="doc_header"><code>file_variations</code><a href="https://github.com/michaelaye/nbplanetary/tree/master/planetarypy/utils.py#L244" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>file_variations</code>(<strong><code>filename</code></strong>:<code>Union</code>[<code>str</code>, <code>Path</code>], <strong><code>extensions</code></strong>:<code>list</code>)</p>
</blockquote>

<pre><code>Create a variation of file names.

Generate a list of variations on a filename by replacing the extension with
the provided list.

Adapted from T. Olsens `file_variations of the pysis module for using pathlib.</code></pre>
<table>
<thead><tr>
<th></th>
<th>Type</th>
<th>Default</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>filename</code></strong></td>
<td><code>Path]</code></td>
<td></td>
<td>The original filename to use as a base.</td>
</tr>
<tr>
<td><strong><code>extensions</code></strong></td>
<td><code>list</code></td>
<td></td>
<td><em>No Content</em></td>
</tr>
<tr>
<td><strong>Returns</strong></td>
<td><code>list</code></td>
<td></td>
<td>list of Paths</td>
</tr>
</tbody>
</table>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fname</span> <span class="o">=</span> <span class="s2">&quot;abc.txt&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="s2">&quot;.cub .cal.cub .map.cal.cub&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">file_variations</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">extensions</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[Path(&#39;abc.cub&#39;), Path(&#39;abc.cal.cub&#39;), Path(&#39;abc.map.cal.cub&#39;)]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">extensions</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_variations</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">extensions</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

<script type="application/vnd.jupyter.widget-state+json">
{"state": {}, "version_major": 2, "version_minor": 0}
</script>

