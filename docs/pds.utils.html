---

title: PDS Utils


keywords: fastai
sidebar: home_sidebar

summary: "Utilities used by the `pds` sub-package."
description: "Utilities used by the `pds` sub-package."
nb_path: "notebooks/02f_pds.utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: notebooks/02f_pds.utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="index_to_df" class="doc_header"><code>index_to_df</code><a href="https://github.com/michaelaye/nbplanetary/tree/{branch}/planetarypy/pds/utils.py#L13" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>index_to_df</code>(<strong><code>indexpath</code></strong>, <strong><code>label</code></strong>, <strong><code>convert_times</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>The main reader function for PDS Indexfiles.</p>
<p>In conjunction with an IndexLabel object that figures out the column widths,
this reader should work for all PDS TAB files.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>indexpath : str or pathlib.Path
    The path to the index TAB file.
label : pdstools.IndexLabel object
    Label object that has both the column names and the columns widths as attributes
    'colnames' and 'colspecs'
convert_times : bool
    Switch to control if to convert columns with "TIME" in name (unless COUNT is as well in name) to datetime</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><p><strong><code>indexpath</code></strong> : <em><code>&lt;class 'inspect._empty'&gt;</code></em></p>
</li>
<li><p><strong><code>label</code></strong> : <em><code>&lt;class 'inspect._empty'&gt;</code></em></p>
</li>
<li><p><strong><code>convert_times</code></strong> : <em><code>&lt;class 'bool'&gt;</code></em>, <em>optional</em></p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="PVLColumn" class="doc_header"><code>class</code> <code>PVLColumn</code><a href="https://github.com/michaelaye/nbplanetary/tree/{branch}/planetarypy/pds/utils.py#L49" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>PVLColumn</code>(<strong><code>pvlobj</code></strong>)</p>
</blockquote>
<p>Manages just one of the columns in a table that is described via PVL.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong><code>pvlobj</code></strong> : <em><code>&lt;class 'inspect._empty'&gt;</code></em></li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="IndexLabel" class="doc_header"><code>class</code> <code>IndexLabel</code><a href="https://github.com/michaelaye/nbplanetary/tree/{branch}/planetarypy/pds/utils.py#L115" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>IndexLabel</code>(<strong><code>labelpath</code></strong>)</p>
</blockquote>
<p>Support working with label files of PDS Index tables.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>labelpath : str, pathlib.Path
    Path to the labelfile for a PDS Indexfile. The actual table should reside in the same
    folder to be automatically parsed when calling the <code>read_index_data</code> method.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><strong><code>labelpath</code></strong> : <em><code>&lt;class 'inspect._empty'&gt;</code></em></li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="decode_line" class="doc_header"><code>decode_line</code><a href="https://github.com/michaelaye/nbplanetary/tree/{branch}/planetarypy/pds/utils.py#L188" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>decode_line</code>(<strong><code>linedata</code></strong>, <strong><code>labelpath</code></strong>)</p>
</blockquote>
<p>Decode one line of tabbed data with the appropriate label file.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>linedata : str
    One line of a .tab data file
labelpath : str or pathlib.Path
    Path to the appropriate label that describes the data.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><p><strong><code>linedata</code></strong> : <em><code>&lt;class 'inspect._empty'&gt;</code></em></p>
</li>
<li><p><strong><code>labelpath</code></strong> : <em><code>&lt;class 'inspect._empty'&gt;</code></em></p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="find_mixed_type_cols" class="doc_header"><code>find_mixed_type_cols</code><a href="https://github.com/michaelaye/nbplanetary/tree/{branch}/planetarypy/pds/utils.py#L204" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>find_mixed_type_cols</code>(<strong><code>df</code></strong>, <strong><code>fix</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<p>For a given dataframe, find the columns that are of mixed type.</p>
<p>Tool to help with the performance warning when trying to save a pandas DataFrame as a HDF.
When a column changes datatype somewhere, pickling occurs, slowing down the reading process of the HDF file.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>df : pandas.DataFrame
    Dataframe to be searched for mixed data-types
fix : bool
    Switch to control if NaN values in these problem columns should be replaced by the string 'UNKNOWN'</p>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2><p>List of column names that have data type changes within themselves.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><p><strong><code>df</code></strong> : <em><code>&lt;class 'inspect._empty'&gt;</code></em></p>
</li>
<li><p><strong><code>fix</code></strong> : <em><code>&lt;class 'bool'&gt;</code></em>, <em>optional</em></p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="fix_hirise_edrcumindex" class="doc_header"><code>fix_hirise_edrcumindex</code><a href="https://github.com/michaelaye/nbplanetary/tree/{branch}/planetarypy/pds/utils.py#L232" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>fix_hirise_edrcumindex</code>(<strong><code>infname</code></strong>, <strong><code>outfname</code></strong>)</p>
</blockquote>
<p>Fix HiRISE EDRCUMINDEX.</p>
<p>The HiRISE EDRCUMINDEX has some broken lines where the SCAN_EXPOSURE_DURATION is of format
F10.4 instead of the defined F9.4.
This function simply replaces those incidences with one less decimal fraction, so 20000.0000
becomes 20000.000.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>infname : str
    Path to broken EDRCUMINDEX.TAB
outfname : str
    Path where to store the fixed TAB file</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><p><strong><code>infname</code></strong> : <em><code>&lt;class 'inspect._empty'&gt;</code></em></p>
</li>
<li><p><strong><code>outfname</code></strong> : <em><code>&lt;class 'inspect._empty'&gt;</code></em></p>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

